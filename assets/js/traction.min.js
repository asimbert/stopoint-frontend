var ExtoleTraction=function(){var b={config:{debug:!1,landing_param_name:"tellapal.id",expiration_days:90,cookie_name:"traction_id",log_host:"d.extole.com",log_mode:"script",cookie_at_full_host:!1}};b.debug=function(a){b.config.debug&&window.console&&console.log(a)};b.traction_id_from_query=function(a){if((a=RegExp("[?&]"+b.config.landing_param_name+"(?:=([^&]*))?","i").exec(a))&&a[1]&&a[1].length>0)return a[1]};b.parse_domain=function(a){return(a=a.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i))?a[0]:
""};b.generate_cookie_data=function(a,c,e){var d=new Date;d.setDate(d.getDate()+e);c=b.config.cookie_name+"="+escape(c)+";";c+="expires="+d.toGMTString()+";";c+="path=/;";a=b.config.cookie_at_full_host?a:"."+b.parse_domain(a);c+="domain="+a+";";return c};b.traction_id_from_cookie=function(){if(document.cookie.length!=0){var a=document.cookie.indexOf(b.config.cookie_name+"=");if(a!=-1){a+=b.config.cookie_name.length+1;var c=document.cookie.indexOf(";",a);if(c==-1)c=document.cookie.length;return unescape(document.cookie.substring(a,
c))}return""}};b.fire_pixel=function(a){if(b.config.log_mode==="image")(new Image).src=a;else{var c=document.createElement("script");c.setAttribute("src",a);c.setAttribute("type","text/javascript");a=document.getElementsByTagName("head")[0]||document.documentElement;a.insertBefore(c,a.firstChild)}};b.log_landing=function(){var a=b.traction_id_from_query(window.location.search);if(a)a=b.generate_cookie_data(document.location.hostname,a,b.config.expiration_days),document.cookie=a};b.log_conversion=
function(a){var c=b.traction_id_from_cookie();b.fire_pixel(b.build_conversion_url(c,a))};b.log_conversion_from_query_string=function(a){var c=b.traction_id_from_query(window.location.search);c&&b.fire_pixel(b.build_conversion_url(c,a))};b.build_conversion_url=function(a,c){var e="https:"==document.location.protocol?"https://":"http://";e+=b.config.log_host+"/a/cnv?";e+="status="+encodeURIComponent(c.status);e+="&a.id="+encodeURIComponent(c.client_id);e+="&log_ua=traction";e+="&tellapal.id="+encodeURIComponent(a);
var d=[],f;for(f in c)d.push(f);for(var d=d.sort(),g=0;g<d.length;g++)f=d[g],f!=="status"&&f!=="client_id"&&f!="tellapal.id"&&f!="date"&&(e+="&"+d[g]+"="+encodeURIComponent(c[f]));return e};b.push=function(a){if(typeof a!="undefined"&&a instanceof Array&&a.length!=0){var c=a[0];if(c==="debug"){if(a.length>1)b.config.debug=a[1]===!0}else c==="log_landing"?b.log_landing():c==="log_conversion"?(a.shift(),a.length>0&&b.log_conversion(a[0])):c==="log_conversion_from_query_string"?(a.shift(),a.length>0&&
b.log_conversion_from_query_string(a[0])):c==="log_mode"?a[1]==="image"&&(b.config.log_mode="image"):a.length>1&&(b.config[c]=a[1])}};return b};if(typeof _xtq!="undefined"&&_xtq&&_xtq instanceof Array)for(var x=new ExtoleTraction,i=0;i<_xtq.length;i++)x.push(_xtq[i]);
